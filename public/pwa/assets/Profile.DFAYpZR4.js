import{e,p as s,f as a,g as t,t as o,F as n,B as i,n as r,x as l,v as c,q as d,l as u,y as m,K as p,A as v,J as f,L as g,r as y,b,w as h,h as k,k as _,o as P}from"./vendor.Ckj8GOAf.js";import{_ as w,A as F,d as S,u as T}from"./index.BzhA8_-u.js";const C={class:"profile"},A={key:0,class:"loading-state"},j={key:1,class:"auth-required"},D={key:2,class:"profile-content"},E={class:"user-info-section"},M={class:"user-details"},z={class:"user-name"},V={class:"user-email"},q={key:0,class:"member-since"},L={class:"profile-navigation"},x=["onClick"],I={class:"material-symbols-outlined"},R={class:"profile-sections"},U={key:0,class:"section-content"},N={class:"section-header"},O={class:"filter-tabs"},$=["onClick"],G={class:"material-symbols-outlined"},J={key:0,class:"favorites-list"},B=["onClick"],K={class:"favorite-image"},X=["src","alt"],H={class:"favorite-type-badge"},Q={class:"material-symbols-outlined"},W={class:"favorite-info"},Y={class:"favorite-title"},Z={class:"favorite-description"},ee={class:"favorite-meta"},se={class:"favorite-date"},ae={class:"favorite-stats"},te={class:"stat"},oe={class:"stat"},ne=["onClick"],ie={key:1,class:"empty-favorites"},re={key:1,class:"section-content"},le={key:0,class:"loading-container"},ce={key:1,class:"predictions-dashboard"},de={class:"predictions-overview"},ue={class:"stats-grid"},me={class:"stat-card total-predictions"},pe={class:"stat-content"},ve={class:"stat-value"},fe={class:"stat-card total-points"},ge={class:"stat-content"},ye={class:"stat-value"},be={class:"stat-card accuracy"},he={class:"stat-content"},ke={class:"stat-value"},_e={key:0,class:"stat-card ranking"},Pe={class:"stat-content"},we={class:"stat-value"},Fe={class:"quick-actions"},Se={class:"sub-tabs"},Te=["onClick"],Ce={class:"material-symbols-outlined"},Ae={key:0,class:"tab-content"},je={key:0,class:"recent-predictions-preview"},De={class:"predictions-list compact"},Ee={class:"prediction-match"},Me={class:"teams"},ze={class:"team"},Ve={class:"team"},qe={class:"match-info"},Le={class:"predicted-score"},xe={key:1,class:"pending"},Ie={key:1,class:"all-predictions"},Re={class:"predictions-header"},Ue={class:"predictions-filters"},Ne={class:"predictions-list"},Oe={class:"prediction-match"},$e={class:"teams"},Ge={class:"team"},Je={class:"team"},Be={class:"match-date"},Ke={class:"prediction-details"},Xe={class:"prediction-scores"},He={class:"predicted"},Qe={class:"score"},We={key:0,class:"actual"},Ye={class:"score"},Ze={class:"prediction-result"},es={key:1,class:"pending"},ss={key:2,class:"empty-predictions"},as={key:1,class:"tab-content"},ts={class:"ranking-section"},os={key:0,class:"my-rank-card"},ns={class:"rank-info"},is={class:"material-symbols-outlined"},rs={key:2,class:"tab-content"},ls={class:"tournaments-section"},cs={key:0,class:"tournaments-list"},ds={class:"tournament-header"},us={class:"tournament-info"},ms={key:0,class:"prize"},ps={class:"participants"},vs={class:"tournament-actions"},fs=["onClick","disabled"],gs=["onClick"],ys={key:1,class:"empty-tournaments"},bs={key:2,class:"error-state"},hs={key:2,class:"section-content"},ks={class:"form-section"},_s={class:"form-field"},Ps={class:"form-actions"},ws=["disabled"],Fs={key:0},Ss={key:1},Ts={key:3,class:"section-content"},Cs={class:"form-section"},As={class:"form-field"},js={class:"form-field"},Ds={class:"form-field"},Es={class:"form-actions"},Ms=["disabled"],zs={key:0},Vs={key:1},qs={class:"form-section logout-section"},Ls={key:4,class:"section-content"},xs={class:"form-section danger-section"},Is={class:"form-field"},Rs={class:"form-field"},Us={class:"checkbox-label"},Ns={class:"form-actions"},Os=["disabled"],$s={key:0},Gs={key:1};const Js=w({name:"Profile",components:{AuthModal:F},setup(){const e=_(),s=S(),a=T();if(!s)return console.error("‚ùå [Profile] AuthStore non initialis√©"),{};const t=y(!1),o=y(!1),n=y([]),i=y("all"),r=y("favorites"),l=y(!1),c=y(null),d=y([]),u=y([]);y(!1);const m=y("my-predictions"),p=y([]),v=y([]),f=y("all"),g=y([{key:"my-predictions",label:"Mes pr√©dictions",icon:"sports_soccer"},{key:"my-ranking",label:"Mon classement",icon:"leaderboard"},{key:"active-tournaments",label:"Tournois actifs",icon:"emoji_events"}]),P=y({name:"",loading:!1,message:"",success:!1}),w=y({currentPassword:"",newPassword:"",confirmPassword:"",loading:!1,message:"",success:!1}),F=y({reason:"",confirm:!1,loading:!1,message:"",success:!1}),C=y([{key:"favorites",label:"Favoris",icon:"favorite"},{key:"predictions",label:"Pronostics",icon:"sports_soccer"},{key:"account",label:"Compte",icon:"person"},{key:"security",label:"S√©curit√©",icon:"security"},{key:"legal",label:"L√©gal",icon:"gavel"}]),A=y([{key:"all",label:"Tout",icon:"apps"},{key:"recipe",label:"Recettes",icon:"restaurant"},{key:"tip",label:"Astuces",icon:"lightbulb"},{key:"event",label:"√âv√©nements",icon:"event"},{key:"dinor_tv",label:"Vid√©os",icon:"play_circle"}]),j=b(()=>n.value.length),D=b(()=>{const e={};return n.value.forEach(s=>{const a="dinor_tv"===s.type?"videos":`${s.type}s`;e[a]=(e[a]||0)+1}),e}),E=b(()=>"all"===i.value?n.value:n.value.filter(e=>e.type===i.value)),M=async()=>{if(null==s?void 0:s.isAuthenticated){t.value=!0;try{console.log("üîç [Profile] Chargement des favoris...");const e=await fetch("/api/test-favorites",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}}),s=await e.json();console.log("üîç [Profile] R√©ponse API favoris:",s),s.success&&(n.value=s.data,console.log("üîç [Profile] Favoris charg√©s:",n.value.length,"√©l√©ments"))}catch(e){console.error("‚ùå [Profile] Erreur lors du chargement des favoris:",e)}finally{t.value=!1}}},z=async()=>{if(null==s?void 0:s.isAuthenticated){l.value=!0;try{console.log("üèÜ [Profile] Chargement des donn√©es de pronostics...");const[e,s,t]=await Promise.all([a.get("/leaderboard/my-stats"),a.get("/predictions/my-recent?limit=5"),a.get("/tournaments/my-tournaments")]);e.success&&(c.value=e.data,console.log("üèÜ [Profile] Stats utilisateur charg√©es:",c.value)),s.success&&(d.value=s.data,console.log("üèÜ [Profile] Pronostics r√©cents charg√©s:",d.value.length,"√©l√©ments")),t.success&&(u.value=t.data,console.log("üèÜ [Profile] Tournois utilisateur charg√©s:",u.value.length,"√©l√©ments"))}catch(e){console.error("‚ùå [Profile] Erreur lors du chargement des donn√©es de pronostics:",e),c.value=null,d.value=[],u.value=[]}finally{l.value=!1}}},V=async()=>{if(null==s?void 0:s.isAuthenticated)try{const e=await a.get("/predictions");e.success&&(v.value=e.data)}catch(e){console.error("‚ùå [Profile] Erreur lors du chargement de toutes les pr√©dictions:",e)}},q=async()=>{if(null==s?void 0:s.isAuthenticated)try{const e=await a.get("/tournaments/featured");e.success&&(p.value=e.data.filter(e=>e.can_predict&&["registration_open","registration_closed","active"].includes(e.status)))}catch(e){console.error("‚ùå [Profile] Erreur lors du chargement des tournois actifs:",e)}},L=e=>{m.value=e,"my-predictions"===e&&0===v.value.length?V():"active-tournaments"===e&&0===p.value.length&&q()},x=b(()=>{if(!v.value.length)return[];switch(f.value){case"calculated":return v.value.filter(e=>e.is_calculated);case"pending":return v.value.filter(e=>!e.is_calculated);case"won":return v.value.filter(e=>e.is_calculated&&e.points_earned>0);default:return v.value}});return h(()=>null==s?void 0:s.isAuthenticated,e=>{e?(M(),z()):(n.value=[],c.value=null,d.value=[])},{immediate:!0}),h(()=>r.value,e=>{"predictions"===e&&(null==s?void 0:s.isAuthenticated)&&!c.value&&z()}),k(()=>{var e,a;(null==s?void 0:s.isAuthenticated)&&(M(),z(),P.value.name=(null==(e=s.user)?void 0:e.name)||"",console.log("üîç [Profile] Donn√©es utilisateur:",s.user),console.log("üîç [Profile] Date cr√©ation:",null==(a=s.user)?void 0:a.created_at))}),{authStore:s,loading:t,activeSection:r,showAuthModal:o,favorites:n,selectedFilter:i,favoriteOptions:A,filteredFavorites:E,loadFavorites:M,removeFavorite:async e=>{if(confirm("√ätes-vous s√ªr de vouloir retirer cet √©l√©ment de vos favoris ?"))try{(await a.request(`/favorites/${e.id}`,{method:"DELETE"})).success&&(n.value=n.value.filter(s=>s.id!==e.id))}catch(s){console.error("Erreur lors de la suppression du favori:",s),alert("Erreur lors de la suppression du favori")}},goToContent:s=>{const a={recipe:`/recipe/${s.content.id}`,tip:`/tip/${s.content.id}`,event:`/event/${s.content.id}`,dinor_tv:"/dinor-tv"}[s.type];a&&e.push(a)},profileSections:C,filterTabs:A,totalFavorites:j,favoritesStats:D,formatMemberSince:e=>{if(!e)return"Date inconnue";try{const s=new Date(e);return isNaN(s.getTime())?"Date inconnue":s.toLocaleDateString("fr-FR",{year:"numeric",month:"long"})}catch(s){return console.warn("Erreur lors du formatage de la date membre:",s),"Date inconnue"}},handleImageError:e=>{e.target.src="/images/default-content.jpg"},usernameForm:P,passwordForm:w,deletionForm:F,updateUsername:async()=>{var e,t,o,n,i;P.value.loading=!0,P.value.message="";try{console.log("üìù [Profile] Mise √† jour du nom:",{name:P.value.name});const e=await a.put("/profile/name",{name:P.value.name});if(console.log("‚úÖ [Profile] R√©ponse mise √† jour nom:",e),e.success){P.value.success=!0,P.value.message="Nom d'utilisateur mis √† jour avec succ√®s";const a={...s.user,name:e.data.name};s.setUser(a),P.value.name=""}}catch(r){if(console.error("‚ùå [Profile] Erreur mise √† jour nom:",r),console.error("‚ùå [Profile] Donn√©es d'erreur:",null==(e=r.response)?void 0:e.data),P.value.success=!1,null==(o=null==(t=r.response)?void 0:t.data)?void 0:o.errors){const e=r.response.data.errors;e.name&&e.name.length>0?P.value.message=e.name[0]:P.value.message="Erreur de validation: "+Object.values(e).flat().join(", ")}else P.value.message=(null==(i=null==(n=r.response)?void 0:n.data)?void 0:i.message)||r.message||"Erreur lors de la mise √† jour"}finally{P.value.loading=!1}},updatePassword:async()=>{var e,s,t,o,n;if(w.value.newPassword!==w.value.confirmPassword)return w.value.success=!1,void(w.value.message="Les mots de passe ne correspondent pas");w.value.loading=!0,w.value.message="";try{console.log("üîê [Profile] Mise √† jour du mot de passe");const e=await a.put("/profile/password",{current_password:w.value.currentPassword,new_password:w.value.newPassword,new_password_confirmation:w.value.confirmPassword});console.log("‚úÖ [Profile] R√©ponse mise √† jour mdp:",e),e.success&&(w.value.success=!0,w.value.message="Mot de passe mis √† jour avec succ√®s",w.value.currentPassword="",w.value.newPassword="",w.value.confirmPassword="")}catch(i){if(console.error("‚ùå [Profile] Erreur mise √† jour mdp:",i),console.error("‚ùå [Profile] Donn√©es d'erreur:",null==(e=i.response)?void 0:e.data),w.value.success=!1,null==(t=null==(s=i.response)?void 0:s.data)?void 0:t.errors){const e=i.response.data.errors;e.current_password&&e.current_password.length>0?w.value.message=e.current_password[0]:e.new_password&&e.new_password.length>0?w.value.message=e.new_password[0]:w.value.message="Erreur de validation: "+Object.values(e).flat().join(", ")}else w.value.message=(null==(n=null==(o=i.response)?void 0:o.data)?void 0:n.message)||i.message||"Erreur lors de la mise √† jour"}finally{w.value.loading=!1}},requestDataDeletion:async()=>{var e,s;if(confirm("√ätes-vous absolument s√ªr de vouloir demander la suppression de toutes vos donn√©es ? Cette action est irr√©versible.")){F.value.loading=!0,F.value.message="";try{const e=await a.request("/profile/request-deletion",{method:"POST",body:{reason:F.value.reason,confirm:F.value.confirm}});e.success&&(F.value.success=!0,F.value.message=e.message,F.value.reason="",F.value.confirm=!1)}catch(t){F.value.success=!1,F.value.message=(null==(s=null==(e=t.response)?void 0:e.data)?void 0:s.message)||"Erreur lors de la demande"}finally{F.value.loading=!1}}},handleLogout:async()=>{if(confirm("√ätes-vous s√ªr de vouloir vous d√©connecter ?")){console.log("üëã [Profile] D√©connexion utilisateur");try{await s.logout(),e.push("/")}catch(a){console.error("‚ùå [Profile] Erreur lors de la d√©connexion:",a)}}},openTournament:s=>{console.log("üèÜ [Profile] Ouverture du tournoi:",s.name),e.push("/predictions/tournaments")},openTournamentModal:s=>{console.log("üèÜ [Profile] Ouverture modale tournoi:",s.name),e.push("/predictions/tournaments")},predictionsLoading:l,userPredictionsStats:c,recentPredictions:d,userTournaments:u,predictionsTabs:g,activePredictionsTab:m,activeTournaments:p,userAllPredictions:v,predictionsFilter:f,filteredPredictions:x,loadPredictionsData:z,loadAllUserPredictions:V,loadActiveTournaments:q,switchPredictionsTab:L,registerToTournament:async e=>{console.log("üèÜ [Profile] Inscription au tournoi:",e.name);try{(await a.post(`/tournaments/${e.id}/register`)).success&&(e.user_is_participant=!0,e.can_register=!1)}catch(s){console.error("‚ùå [Profile] Erreur inscription tournoi:",s)}},goToPredictions:s=>{console.log("üèÜ [Profile] Aller aux pr√©dictions:",(null==s?void 0:s.name)||"global"),e.push("/predictions")},goToLeaderboard:()=>{console.log("üèÜ [Profile] Aller au classement"),L("my-ranking")},getPointsClass:e=>e>0?"points-positive":0===e?"points-neutral":"points-negative",getTournamentStatusLabel:e=>({registration_open:"Inscriptions ouvertes",registration_closed:"Inscriptions ferm√©es",active:"En cours",finished:"Termin√©",cancelled:"Annul√©"}[e]||e),formatPrize:(e,s="XOF")=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:s,minimumFractionDigits:0}).format(e),getRankClass:e=>e?1===e?"rank-gold":2===e?"rank-silver":3===e?"rank-bronze":e<=10?"rank-top10":"":"",formatDate:e=>{if(!e)return"";try{const s=new Date(e);return isNaN(s.getTime())?"":s.toLocaleDateString("fr-FR",{day:"numeric",month:"short"})}catch(s){return console.warn("Erreur lors du formatage de la date:",s),""}},getTypeIcon:e=>({recipe:"restaurant",tip:"lightbulb",event:"event",dinor_tv:"play_circle"}[e]||"star"),getDefaultImage:e=>({recipe:"/images/default-recipe.jpg",tip:"/images/default-tip.jpg",event:"/images/default-event.jpg",dinor_tv:"/images/default-video.jpg"}[e]||"/images/default-content.jpg"),getShortDescription:e=>{if(!e)return"";const s=e.replace(/<[^>]*>/g,"");return s.length>100?s.substring(0,100)+"...":s},getEmptyMessage:()=>({all:"Aucun favori pour le moment",recipe:"Aucune recette favorite",tip:"Aucune astuce favorite",event:"Aucun √©v√©nement favori",dinor_tv:"Aucune vid√©o favorite"}[i.value]||"Aucun favori"),getEmptyDescription:()=>({all:"Ajoutez du contenu √† vos favoris en cliquant sur l'ic√¥ne c≈ìur",recipe:"Parcourez les recettes et ajoutez vos pr√©f√©r√©es √† vos favoris",tip:"D√©couvrez des astuces utiles et sauvegardez-les",event:"Trouvez des √©v√©nements int√©ressants et ajoutez-les √† vos favoris",dinor_tv:"Regardez des vid√©os et ajoutez vos pr√©f√©r√©es √† vos favoris"}[i.value]||""),getExploreLink:()=>({all:"/",recipe:"/recipes",tip:"/tips",event:"/events",dinor_tv:"/dinor-tv"}[i.value]||"/")}}},[["render",function(y,b,h,k,_,w){var F,S,T,Js;const Bs=u("router-link"),Ks=u("AuthModal");return P(),e("div",C,[k.loading?(P(),e("div",A,b[21]||(b[21]=[a("div",{class:"loading-spinner"},null,-1),a("p",null,"Chargement du profil...",-1)]))):(null==(F=k.authStore)?void 0:F.isAuthenticated)?(P(),e("div",D,[a("div",E,[b[25]||(b[25]=a("div",{class:"user-avatar"},[a("span",{class:"material-symbols-outlined"},"person")],-1)),a("div",M,[a("h1",z,o(k.authStore.userName),1),a("p",V,o(null==(S=k.authStore.user)?void 0:S.email),1),(null==(T=k.authStore.user)?void 0:T.created_at)?(P(),e("p",q,"Membre depuis "+o(k.formatMemberSince(k.authStore.user.created_at)),1)):t("",!0)])]),a("div",L,[(P(!0),e(n,null,i(k.profileSections,s=>(P(),e("button",{key:s.key,onClick:e=>k.activeSection=s.key,class:r(["nav-button",{active:k.activeSection===s.key}])},[a("span",I,o(s.icon),1),a("span",null,o(s.label),1)],10,x))),128))]),a("div",R,["favorites"===k.activeSection?(P(),e("div",U,[a("div",N,[b[26]||(b[26]=a("h2",{class:"section-title"},"Mes Favoris",-1)),a("div",O,[(P(!0),e(n,null,i(k.filterTabs,s=>(P(),e("button",{key:s.key,onClick:e=>k.selectedFilter=s.key,class:r(["filter-tab",{active:k.selectedFilter===s.key}])},[a("span",G,o(s.icon),1),a("span",null,o(s.label),1)],10,$))),128))])]),k.filteredFavorites.length?(P(),e("div",J,[(P(!0),e(n,null,i(k.filteredFavorites,s=>(P(),e("div",{key:s.id,onClick:e=>k.goToContent(s),class:"favorite-item"},[a("div",K,[a("img",{src:s.content.image||k.getDefaultImage(s.type),alt:s.content.title,onError:b[1]||(b[1]=(...e)=>k.handleImageError&&k.handleImageError(...e))},null,40,X),a("div",H,[a("span",Q,o(k.getTypeIcon(s.type)),1)])]),a("div",W,[a("h3",Y,o(s.content.title),1),a("p",Z,o(k.getShortDescription(s.content.description)),1),a("div",ee,[a("span",se," Ajout√© "+o(k.formatDate(s.favorited_at)),1),a("div",ae,[a("span",te,[b[27]||(b[27]=a("span",{class:"material-symbols-outlined"},"favorite",-1)),l(" "+o(s.content.likes_count||0),1)]),a("span",oe,[b[28]||(b[28]=a("span",{class:"material-symbols-outlined"},"comment",-1)),l(" "+o(s.content.comments_count||0),1)])])])]),a("button",{onClick:c(e=>k.removeFavorite(s),["stop"]),class:"remove-favorite",title:"Retirer des favoris"},b[29]||(b[29]=[a("span",{class:"material-symbols-outlined"},"close",-1)]),8,ne)],8,B))),128))])):(P(),e("div",ie,[b[31]||(b[31]=a("div",{class:"empty-icon"},[a("span",{class:"material-symbols-outlined"},"favorite_border")],-1)),a("h3",null,o(k.getEmptyMessage()),1),a("p",null,o(k.getEmptyDescription()),1),s(Bs,{to:k.getExploreLink(),class:"btn-secondary"},{default:d(()=>b[30]||(b[30]=[l(" D√©couvrir du contenu ")])),_:1,__:[30]},8,["to"])]))])):t("",!0),"predictions"===k.activeSection?(P(),e("div",re,[b[62]||(b[62]=a("h2",{class:"section-title"},"Mes Pronostics",-1)),k.predictionsLoading?(P(),e("div",le,b[32]||(b[32]=[a("div",{class:"md3-circular-progress"},null,-1),a("p",null,"Chargement de vos statistiques...",-1)]))):k.userPredictionsStats?(P(),e("div",ce,[a("div",de,[a("div",ue,[a("div",me,[b[34]||(b[34]=a("div",{class:"stat-icon"},[a("span",{class:"material-symbols-outlined"},"sports_soccer")],-1)),a("div",pe,[a("span",ve,o(k.userPredictionsStats.total_predictions),1),b[33]||(b[33]=a("span",{class:"stat-label"},"Total pr√©dictions",-1))])]),a("div",fe,[b[36]||(b[36]=a("div",{class:"stat-icon"},[a("span",{class:"material-symbols-outlined"},"emoji_events")],-1)),a("div",ge,[a("span",ye,o(k.userPredictionsStats.total_points),1),b[35]||(b[35]=a("span",{class:"stat-label"},"Points gagn√©s",-1))])]),a("div",be,[b[38]||(b[38]=a("div",{class:"stat-icon"},[a("span",{class:"material-symbols-outlined"},"target")],-1)),a("div",he,[a("span",ke,o(k.userPredictionsStats.accuracy_percentage)+"%",1),b[37]||(b[37]=a("span",{class:"stat-label"},"Pr√©cision",-1))])]),k.userPredictionsStats.current_rank?(P(),e("div",_e,[b[40]||(b[40]=a("div",{class:"stat-icon"},[a("span",{class:"material-symbols-outlined"},"leaderboard")],-1)),a("div",Pe,[a("span",we,"#"+o(k.userPredictionsStats.current_rank),1),b[39]||(b[39]=a("span",{class:"stat-label"},"Classement",-1))])])):t("",!0)]),a("div",Fe,[a("button",{onClick:b[2]||(b[2]=(...e)=>k.goToPredictions&&k.goToPredictions(...e)),class:"action-button primary"},b[41]||(b[41]=[a("span",{class:"material-symbols-outlined"},"add_circle",-1),a("span",null,"Faire un pronostic",-1)])),a("button",{onClick:b[3]||(b[3]=e=>k.switchPredictionsTab("my-ranking")),class:"action-button secondary"},b[42]||(b[42]=[a("span",{class:"material-symbols-outlined"},"leaderboard",-1),a("span",null,"Voir le classement",-1)])),a("button",{onClick:b[4]||(b[4]=e=>k.switchPredictionsTab("active-tournaments")),class:"action-button secondary"},b[43]||(b[43]=[a("span",{class:"material-symbols-outlined"},"emoji_events",-1),a("span",null,"Tournois actifs",-1)]))])]),a("div",Se,[(P(!0),e(n,null,i(k.predictionsTabs,s=>(P(),e("button",{key:s.key,onClick:e=>k.switchPredictionsTab(s.key),class:r(["sub-tab",{active:k.activePredictionsTab===s.key}])},[a("span",Ce,o(s.icon),1),a("span",null,o(s.label),1)],10,Te))),128))]),"my-predictions"===k.activePredictionsTab?(P(),e("div",Ae,[k.recentPredictions.length?(P(),e("div",je,[b[45]||(b[45]=a("h3",{class:"subsection-title"},"Pronostics r√©cents",-1)),a("div",De,[(P(!0),e(n,null,i(k.recentPredictions.slice(0,3),s=>(P(),e("div",{key:s.id,class:r(["prediction-card compact",{calculated:s.is_calculated}])},[a("div",Ee,[a("div",Me,[a("span",ze,o(s.football_match.home_team.short_name||s.football_match.home_team.name),1),b[44]||(b[44]=a("span",{class:"vs"},"vs",-1)),a("span",Ve,o(s.football_match.away_team.short_name||s.football_match.away_team.name),1)]),a("div",qe,[a("span",Le,o(s.predicted_home_score)+" - "+o(s.predicted_away_score),1),s.is_calculated?(P(),e("span",{key:0,class:r(["points-earned",{"points-positive":s.points_earned>0}])},o(s.points_earned)+" pt"+o(s.points_earned>1?"s":""),3)):(P(),e("span",xe,"En attente"))])])],2))),128))]),a("button",{onClick:b[5]||(b[5]=(...e)=>k.loadAllUserPredictions&&k.loadAllUserPredictions(...e)),class:"btn-secondary show-all-btn"}," Voir tous mes pronostics ("+o(k.userPredictionsStats.total_predictions)+") ",1)])):t("",!0),k.userAllPredictions.length?(P(),e("div",Ie,[a("div",Re,[b[47]||(b[47]=a("h3",{class:"subsection-title"},"Tous mes pronostics",-1)),a("div",Ue,[m(a("select",{"onUpdate:modelValue":b[6]||(b[6]=e=>k.predictionsFilter=e),class:"filter-select"},b[46]||(b[46]=[a("option",{value:"all"},"Tous",-1),a("option",{value:"calculated"},"Termin√©s",-1),a("option",{value:"pending"},"En attente",-1),a("option",{value:"won"},"Gagnants",-1)]),512),[[p,k.predictionsFilter]])])]),a("div",Ne,[(P(!0),e(n,null,i(k.filteredPredictions,s=>(P(),e("div",{key:s.id,class:r(["prediction-card detailed",{calculated:s.is_calculated}])},[a("div",Oe,[a("div",$e,[a("span",Ge,o(s.football_match.home_team.name),1),b[48]||(b[48]=a("span",{class:"vs"},"vs",-1)),a("span",Je,o(s.football_match.away_team.name),1)]),a("div",Be,o(k.formatDate(s.football_match.match_date)),1)]),a("div",Ke,[a("div",Xe,[a("div",He,[b[49]||(b[49]=a("span",{class:"label"},"Pronostic:",-1)),a("span",Qe,o(s.predicted_home_score)+" - "+o(s.predicted_away_score),1)]),s.football_match.is_finished?(P(),e("div",We,[b[50]||(b[50]=a("span",{class:"label"},"R√©sultat:",-1)),a("span",Ye,o(s.football_match.home_score)+" - "+o(s.football_match.away_score),1)])):t("",!0)]),a("div",Ze,[s.is_calculated?(P(),e("span",{key:0,class:r(["points-earned",k.getPointsClass(s.points_earned)])},o(s.points_earned)+" point"+o(s.points_earned>1?"s":""),3)):(P(),e("span",es,"En attente du r√©sultat"))])])],2))),128))])])):t("",!0),k.recentPredictions.length||k.userAllPredictions.length?t("",!0):(P(),e("div",ss,[b[51]||(b[51]=a("div",{class:"empty-icon"},[a("span",{class:"material-symbols-outlined"},"sports_soccer")],-1)),b[52]||(b[52]=a("h3",null,"Aucun pronostic pour le moment",-1)),b[53]||(b[53]=a("p",null,"Commencez √† faire des pronostics pour gagner des points et grimper dans le classement !",-1)),a("button",{onClick:b[7]||(b[7]=(...e)=>k.goToPredictions&&k.goToPredictions(...e)),class:"btn-primary"}," Faire mon premier pronostic ")]))])):t("",!0),"my-ranking"===k.activePredictionsTab?(P(),e("div",as,[a("div",ts,[b[54]||(b[54]=a("h3",{class:"subsection-title"},"Mon classement",-1)),k.userPredictionsStats.current_rank?(P(),e("div",os,[a("div",{class:r(["rank-badge",k.getRankClass(k.userPredictionsStats.current_rank)])}," #"+o(k.userPredictionsStats.current_rank),3),a("div",ns,[a("h4",null,o((null==(Js=k.authStore.user)?void 0:Js.name)||"Vous"),1),a("p",null,o(k.userPredictionsStats.total_points)+" points ‚Ä¢ "+o(k.userPredictionsStats.accuracy_percentage)+"% de r√©ussite",1),k.userPredictionsStats.rank_change?(P(),e("div",{key:0,class:r(["rank-change",{positive:k.userPredictionsStats.rank_change>0,negative:k.userPredictionsStats.rank_change<0}])},[a("span",is,o(k.userPredictionsStats.rank_change>0?"trending_up":"trending_down"),1),l(" "+o(Math.abs(k.userPredictionsStats.rank_change))+" place"+o(Math.abs(k.userPredictionsStats.rank_change)>1?"s":""),1)],2)):t("",!0)])])):t("",!0),a("button",{onClick:b[8]||(b[8]=(...e)=>k.goToLeaderboard&&k.goToLeaderboard(...e)),class:"btn-secondary"}," Voir le classement complet ")])])):t("",!0),"active-tournaments"===k.activePredictionsTab?(P(),e("div",rs,[a("div",ls,[b[58]||(b[58]=a("h3",{class:"subsection-title"},"Tournois en cours",-1)),k.activeTournaments.length?(P(),e("div",cs,[(P(!0),e(n,null,i(k.activeTournaments,s=>(P(),e("div",{key:s.id,class:"tournament-card"},[a("div",ds,[a("h4",null,o(s.name),1),a("span",{class:r(["tournament-status",s.status])},o(k.getTournamentStatusLabel(s.status)),3)]),a("div",us,[s.total_prize?(P(),e("div",ms,[b[55]||(b[55]=a("span",{class:"material-symbols-outlined"},"emoji_events",-1)),a("span",null,o(k.formatPrize(s.total_prize)),1)])):t("",!0),a("div",ps,[b[56]||(b[56]=a("span",{class:"material-symbols-outlined"},"group",-1)),a("span",null,o(s.participants_count||0)+" participant"+o((s.participants_count||0)>1?"s":""),1)])]),a("div",vs,[s.can_register&&!s.user_is_participant?(P(),e("button",{key:0,onClick:e=>k.registerToTournament(s),disabled:y.registering===s.id,class:"btn-secondary"},o(y.registering===s.id?"Inscription...":"S'inscrire"),9,fs)):t("",!0),s.user_is_participant?(P(),e("button",{key:1,onClick:e=>k.goToPredictions(s),class:"btn-primary"}," Faire mes pronostics ",8,gs)):t("",!0)])]))),128))])):(P(),e("div",ys,b[57]||(b[57]=[a("div",{class:"empty-icon"},[a("span",{class:"material-symbols-outlined"},"emoji_events")],-1),a("h4",null,"Aucun tournoi actif",-1),a("p",null,"Les nouveaux tournois appara√Ætront ici d√®s qu'ils seront disponibles.",-1)])))])])):t("",!0)])):(P(),e("div",bs,[b[59]||(b[59]=a("div",{class:"error-icon"},[a("span",{class:"material-symbols-outlined"},"error")],-1)),b[60]||(b[60]=a("h3",null,"Impossible de charger vos pronostics",-1)),b[61]||(b[61]=a("p",null,"V√©rifiez votre connexion et r√©essayez.",-1)),a("button",{onClick:b[9]||(b[9]=(...e)=>k.loadPredictionsData&&k.loadPredictionsData(...e)),class:"btn-secondary"},"R√©essayer")]))])):t("",!0),"account"===k.activeSection?(P(),e("div",hs,[b[65]||(b[65]=a("h2",{class:"section-title"},"Mon Compte",-1)),a("div",ks,[b[64]||(b[64]=a("h3",{class:"form-title"},"Nom d'utilisateur",-1)),a("form",{onSubmit:b[11]||(b[11]=c((...e)=>k.updateUsername&&k.updateUsername(...e),["prevent"])),class:"update-form"},[a("div",_s,[b[63]||(b[63]=a("label",{class:"form-label"},"Nouveau nom d'utilisateur",-1)),m(a("input",{"onUpdate:modelValue":b[10]||(b[10]=e=>k.usernameForm.name=e),type:"text",class:"form-input",placeholder:"Votre nom d'utilisateur",required:"",minlength:"2",maxlength:"255"},null,512),[[v,k.usernameForm.name]])]),a("div",Ps,[a("button",{type:"submit",class:"btn-primary",disabled:k.usernameForm.loading},[k.usernameForm.loading?(P(),e("span",Fs,"Mise √† jour...")):(P(),e("span",Ss,"Mettre √† jour"))],8,ws)]),k.usernameForm.message?(P(),e("div",{key:0,class:r(["form-message",k.usernameForm.success?"success":"error"])},o(k.usernameForm.message),3)):t("",!0)],32)])])):t("",!0),"security"===k.activeSection?(P(),e("div",Ts,[b[74]||(b[74]=a("h2",{class:"section-title"},"S√©curit√©",-1)),a("div",Cs,[b[70]||(b[70]=a("h3",{class:"form-title"},"Changer le mot de passe",-1)),a("form",{onSubmit:b[15]||(b[15]=c((...e)=>k.updatePassword&&k.updatePassword(...e),["prevent"])),class:"update-form"},[a("div",As,[b[66]||(b[66]=a("label",{class:"form-label"},"Mot de passe actuel",-1)),m(a("input",{"onUpdate:modelValue":b[12]||(b[12]=e=>k.passwordForm.currentPassword=e),type:"password",class:"form-input",placeholder:"Votre mot de passe actuel",required:""},null,512),[[v,k.passwordForm.currentPassword]])]),a("div",js,[b[67]||(b[67]=a("label",{class:"form-label"},"Nouveau mot de passe",-1)),m(a("input",{"onUpdate:modelValue":b[13]||(b[13]=e=>k.passwordForm.newPassword=e),type:"password",class:"form-input",placeholder:"Votre nouveau mot de passe",required:"",minlength:"8"},null,512),[[v,k.passwordForm.newPassword]]),b[68]||(b[68]=a("small",{class:"form-hint"},"Au moins 8 caract√®res avec lettres et chiffres",-1))]),a("div",Ds,[b[69]||(b[69]=a("label",{class:"form-label"},"Confirmer le nouveau mot de passe",-1)),m(a("input",{"onUpdate:modelValue":b[14]||(b[14]=e=>k.passwordForm.confirmPassword=e),type:"password",class:"form-input",placeholder:"Confirmer votre nouveau mot de passe",required:"",minlength:"8"},null,512),[[v,k.passwordForm.confirmPassword]])]),a("div",Es,[a("button",{type:"submit",class:"btn-primary",disabled:k.passwordForm.loading},[k.passwordForm.loading?(P(),e("span",zs,"Mise √† jour...")):(P(),e("span",Vs,"Changer le mot de passe"))],8,Ms)]),k.passwordForm.message?(P(),e("div",{key:0,class:r(["form-message",k.passwordForm.success?"success":"error"])},o(k.passwordForm.message),3)):t("",!0)],32)]),a("div",qs,[b[72]||(b[72]=a("h3",{class:"form-title"},"D√©connexion",-1)),b[73]||(b[73]=a("p",{class:"form-description"}," Vous serez d√©connect√© de votre compte sur cet appareil. Vos donn√©es seront conserv√©es. ",-1)),a("button",{onClick:b[16]||(b[16]=(...e)=>k.handleLogout&&k.handleLogout(...e)),class:"btn-logout-main"},b[71]||(b[71]=[a("span",{class:"material-symbols-outlined"},"logout",-1),a("span",null,"Se d√©connecter",-1)]))])])):t("",!0),"legal"===k.activeSection?(P(),e("div",Ls,[b[79]||(b[79]=f('<h2 class="section-title" data-v-2121db03>L√©gal &amp; Confidentialit√©</h2><div class="legal-section" data-v-2121db03><h3 class="form-title" data-v-2121db03>Conditions d&#39;utilisation</h3><div class="legal-links" data-v-2121db03><a href="/terms" class="legal-link" data-v-2121db03><span class="material-symbols-outlined" data-v-2121db03>description</span><span data-v-2121db03>Conditions g√©n√©rales d&#39;utilisation</span><span class="material-symbols-outlined" data-v-2121db03>arrow_forward_ios</span></a><a href="/privacy" class="legal-link" data-v-2121db03><span class="material-symbols-outlined" data-v-2121db03>privacy_tip</span><span data-v-2121db03>Politique de confidentialit√©</span><span class="material-symbols-outlined" data-v-2121db03>arrow_forward_ios</span></a><a href="/cookies" class="legal-link" data-v-2121db03><span class="material-symbols-outlined" data-v-2121db03>cookie</span><span data-v-2121db03>Politique des cookies</span><span class="material-symbols-outlined" data-v-2121db03>arrow_forward_ios</span></a></div></div>',2)),a("div",xs,[b[77]||(b[77]=a("h3",{class:"form-title danger-title"},"Suppression des donn√©es",-1)),b[78]||(b[78]=a("p",{class:"danger-description"}," Vous pouvez demander la suppression de toutes vos donn√©es personnelles conform√©ment au RGPD. Cette action est irr√©versible. ",-1)),a("form",{onSubmit:b[19]||(b[19]=c((...e)=>k.requestDataDeletion&&k.requestDataDeletion(...e),["prevent"])),class:"update-form"},[a("div",Is,[b[75]||(b[75]=a("label",{class:"form-label"},"Raison de la suppression (optionnel)",-1)),m(a("textarea",{"onUpdate:modelValue":b[17]||(b[17]=e=>k.deletionForm.reason=e),class:"form-textarea",placeholder:"Expliquez pourquoi vous souhaitez supprimer vos donn√©es...",rows:"3",maxlength:"500"},null,512),[[v,k.deletionForm.reason]])]),a("div",Rs,[a("label",Us,[m(a("input",{"onUpdate:modelValue":b[18]||(b[18]=e=>k.deletionForm.confirm=e),type:"checkbox",required:""},null,512),[[g,k.deletionForm.confirm]]),b[76]||(b[76]=l(" Je confirme vouloir supprimer d√©finitivement toutes mes donn√©es "))])]),a("div",Ns,[a("button",{type:"submit",class:"btn-danger",disabled:k.deletionForm.loading||!k.deletionForm.confirm},[k.deletionForm.loading?(P(),e("span",$s,"Demande en cours...")):(P(),e("span",Gs,"Demander la suppression"))],8,Os)]),k.deletionForm.message?(P(),e("div",{key:0,class:r(["form-message",k.deletionForm.success?"success":"error"])},o(k.deletionForm.message),3)):t("",!0)],32)])])):t("",!0)])])):(P(),e("div",j,[b[22]||(b[22]=a("div",{class:"auth-icon"},[a("span",{class:"material-symbols-outlined"},"person")],-1)),b[23]||(b[23]=a("h2",{class:"md3-title-large"},"Profil utilisateur",-1)),b[24]||(b[24]=a("p",{class:"md3-body-large"},"Connectez-vous pour voir votre profil et vos favoris",-1)),a("button",{onClick:b[0]||(b[0]=e=>k.showAuthModal=!0),class:"btn-primary"}," Se connecter ")])),s(Ks,{modelValue:k.showAuthModal,"onUpdate:modelValue":b[20]||(b[20]=e=>k.showAuthModal=e)},null,8,["modelValue"])])}],["__scopeId","data-v-2121db03"]]);export{Js as default};
